<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

<title>Uudenmaan luontokohteet</title>
<div class="container">
  <nav class="navbar navbar-expand-sm navbar-light">
    <a class="navbar-brand" href="/mainpage">Etusivu</a>
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="../destinations">Kaikki kohteet</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../profile">Oma profiili</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../logout">Kirjaudu ulos</a>
      </li>
    </ul>
  </nav>
  <div class="row">

    <div class="col-8">

      <h1>{{ destination[1] }}, {{ destination[2] }}</h1>
      <br>
      <p>Kohteen luontopolut ja nähtävyydet:</p>
      <ul>
          {% for attraction in attractions: %}
            <li><b>{{ attraction[2] }}</b> {% if attraction[3] %} - {{ attraction[3] }} {% endif %} </li>
          {% endfor %}
      </ul>
      
      <br>
      {% if isFavourite %}
        <a href="/removefavourite">Poista kohde suosikeista</a>
      {% else %}
        <a href="/makefavourite">Lisää kohde suosikkeihin</a>
      {% endif %}
      <br>

      {% if admin %}
      <br>
      <br>
      <br>
        <h5>Poista kohteesta</h5>
        <br>
        <form action="/deleteattraction" method="POST">

          <div class="form-group col-6">
            <label for="delAttraction">Poistettava polku/nähtävyys:</label>
            <select name="delAttraction" class="form-control" id="delAttraction">
              {% for attraction in attractions %}
                <option value="{{ attraction[0] }}">{{ attraction[2] }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group col-6">
            <button type="submit" class="btn btn-primary">Poista</button>
          </div>

          <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">

        </form>

        <br>
        <h5><a href="/deletedestination?deldest={{destination[0]}}">Poista tämä kohde</a></h5>
      {% endif %}

    </div>

    <div class="col-4">
        <h3>Arvostelut - 
            <img src="/static/star.png" alt="tähtiä:" style="width:25px;height:25px;">
            {{ destination[3] }}
        </h3>

        <br>
        <h6>Arvostele tämä kohde:</h6>
        <form action="/newreview" method="POST">
            <div>
                Tähtiä:
                <label for="one">1</label>
                <input type="radio" value=1 id="one" name="stars"/>
                
                <label for="two"> 2</label>
                <input type="radio" value=2 id="two" name="stars"/>

                <label for="three"> 3</label>
                <input type="radio" value=3 id="three" name="stars"/>

                <label for="four"> 4</label>
                <input type="radio" value=4 id="four" name="stars"/>

                <label for="five"> 5</label>
                <input type="radio" value=5 id="five" name="stars"/>
            </div>
            <div class="form-group col-12">
                <textarea name="comment" class="form-control"></textarea>
            </div>
            <div class="form-group col-12">
                <button type="submit" class="btn btn-primary">Lisää arvostelu</button>
            </div>

            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
            
        </form>

        {% if error %}
            <p>{{ error }}</p>
        {% endif %}

        <div>
            <br>
            {% for review in reviews: %}
                <h5>
                    @{{ review[1] }} - 
                    <img src="/static/star.png" alt="tähtiä:" style="width:25px;height:25px;">
                    {{review[2]}}
                </h5>
                <p>{{ review[3] }}</p>
                {% if admin %}
                  <a href="/deletereviewasadmin?review={{review[0]}}">Poista</a>
                  <br>
                {% endif %}
                <br>
            {% endfor %}
        </div>   
    </div>
  </div>
</div>